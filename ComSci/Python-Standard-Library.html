<!DOCTYPE html><html lang=en><head><meta http-equiv=content-type content="text/html; charset=UTF-8"><meta name=viewport content="width=device-width, initial-scale=1"><title>Python Standard Library | Notes in Progress</title><meta name=robots content=noindex><meta property=og:title content=Python standard library><meta property=og:site_name content=Notes in progress><meta property=og:type content=article><script type=application/ld+json>
  {"@type":"BlogPosting","headline":"Notes in Progress","dateModified":"2019-02-09T00:00:00+00:00","datePublished":"2019-02-09T00:00:00+00:00","url":https://febkor.github.io/NotesInProgress,"mainEntityOfPage":{"@type":"WebPage","@id":https://febkor.github.io/NotesInProgress},"description":"Notes","@context":"http://schema.org"}</script><link rel=stylesheet href=https://febkor.github.io/NotesInProgress/static/main.css><link rel="shortcut icon" type=image/x-icon href=https://febkor.github.io/NotesInProgress/static/favicon.ico><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded", function () {
    var mathElements = document.getElementsByClassName("math");
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") { katex.render(texText.data, mathElements[i], { displayMode: mathElements[i].classList.contains("display"), throwOnError: false } );
    }}});</script></head><body><header class=site-header role=banner><div class=wrapper><a class=site-title rel=author href=https://febkor.github.io/NotesInProgress>Notes in Progress</a><nav class=site-nav><input type=checkbox id=nav-trigger class=nav-trigger><label for=nav-trigger></label></nav></div></header><main class=page-content aria-label=Content><div class=wrapper><article class="post h-entry" itemscope itemtype=http://schema.org/BlogPosting><header class=post-header><h1 class="post-title p-name" itemprop="name headline">Python Standard Library</h1></header><div class="post-content e-content" itemprop=articleBody><h1 id=data-types>Data Types</h1><h2 id=collections-module>Collections module</h2><p>The <code>collections</code> module provides specialized data structures.</p><ul><li><code>Counter</code><ul><li>stores counts as values</li><li><code>c = Counter(iterable)</code></li><li><code>c[item] += 1</code> to update</li><li><code>c.most_common(2)</code> returns 2 most common items</li></ul></li><li><code>OrderedDict</code> [mostly irrelevant since <code>dict</code> is now ordered]</li><li><code>defaultdict</code><ul><li>return default values for missing keys</li><li>accessing a missing key creates and initializes it</li><li><code>dd = defaultdict(list)</code></li><li><code>dd["planets"].append("Mars")</code></li></ul></li><li><code>ChainMap</code><ul><li>search multiple dictionaries as a single mapping</li><li>groups multiple dictionaries into a single mapping</li><li>lookups search the underlying mappings one by one until a key is found</li><li>insertions, updates, and deletions only affect the first mapping added to the chain</li><li><code>chain = ChainMap(dict1, dict2)</code></li></ul></li><li><code>deque</code><ul><li>support thread-safe, memory efficient, <span class="math inline">O(1)</span> appends and pops from either side of the deque</li><li><code>append</code>, <code>appendleft</code>, <code>extend</code>, <code>extendleft</code>, <code>pop</code>, <code>popleft</code></li><li><code>rotate(n)</code>, with <span class="math inline">n&gt;0</span> for right-rotation, <span class="math inline">n&lt;0</span> for left-rotation</li></ul></li></ul><p>Note that <code>defaultdict</code> is all lower case, and not camel case, for historical reasons.</p><h2 id=enum>Enum</h2><div class=sourceCode id=cb1><pre class="sourceCode python"><code class="sourceCode python"><span id=cb1-1><a href=#cb1-1 aria-hidden=true></a><span class=im>from</span> enum <span class=im>import</span> Enum</span>
<span id=cb1-2><a href=#cb1-2 aria-hidden=true></a><span class=kw>class</span> Color(Enum):</span>
<span id=cb1-3><a href=#cb1-3 aria-hidden=true></a>    RED <span class=op>=</span> <span class=dv>1</span></span>
<span id=cb1-4><a href=#cb1-4 aria-hidden=true></a>    GREEN <span class=op>=</span> <span class=dv>2</span></span>
<span id=cb1-5><a href=#cb1-5 aria-hidden=true></a>    BLUE <span class=op>=</span> <span class=dv>3</span></span></code></pre></div><h1 id=functional-programming-modules>Functional Programming Modules</h1><h2 id=functools><code>functools</code></h2><p>For higher-order functions: functions that act on or return other functions.</p><div class=sourceCode id=cb2><pre class="sourceCode python"><code class="sourceCode python"><span id=cb2-1><a href=#cb2-1 aria-hidden=true></a><span class=at>@functools.cached_property</span>(func)</span>
<span id=cb2-2><a href=#cb2-2 aria-hidden=true></a>functools.cmp_to_key(func)</span>
<span id=cb2-3><a href=#cb2-3 aria-hidden=true></a><span class=at>@functools.lru_cache</span>(user_function)</span>
<span id=cb2-4><a href=#cb2-4 aria-hidden=true></a><span class=at>@functools.lru_cache</span>(maxsize<span class=op>=</span><span class=dv>128</span>, typed<span class=op>=</span><span class=va>False</span>)</span>
<span id=cb2-5><a href=#cb2-5 aria-hidden=true></a><span class=at>@functools.total_ordering</span></span>
<span id=cb2-6><a href=#cb2-6 aria-hidden=true></a>functools.partial(func, <span class=op>/</span>, <span class=op>*</span>args, <span class=op>**</span>keywords)</span>
<span id=cb2-7><a href=#cb2-7 aria-hidden=true></a><span class=kw>class</span> functools.partialmethod(func, <span class=op>/</span>, <span class=op>*</span>args, <span class=op>**</span>keywords)</span>
<span id=cb2-8><a href=#cb2-8 aria-hidden=true></a>functools.<span class=bu>reduce</span>(function, iterable[, initializer])</span>
<span id=cb2-9><a href=#cb2-9 aria-hidden=true></a><span class=at>@functools.singledispatch</span></span>
<span id=cb2-10><a href=#cb2-10 aria-hidden=true></a><span class=kw>class</span> functools.singledispatchmethod(func)</span>
<span id=cb2-11><a href=#cb2-11 aria-hidden=true></a><span class=at>@functools.wraps</span>(wrapped, assigned<span class=op>=</span>WRAPPER_ASSIGNMENTS, updated<span class=op>=</span>WRAPPER_UPDATES)</span></code></pre></div><h2 id=itertools><code>itertools</code></h2><p>Infinite iterators:</p><div class=sourceCode id=cb3><pre class="sourceCode python"><code class="sourceCode python"><span id=cb3-1><a href=#cb3-1 aria-hidden=true></a>count(<span class=dv>10</span>) <span class=op>--&gt;</span> <span class=dv>10</span> <span class=dv>11</span> <span class=dv>12</span> <span class=dv>13</span> <span class=dv>14</span> ...</span>
<span id=cb3-2><a href=#cb3-2 aria-hidden=true></a>cycle(<span class=st>&#39;ABCD&#39;</span>) <span class=op>--&gt;</span> A B C D A B C D ...</span>
<span id=cb3-3><a href=#cb3-3 aria-hidden=true></a>repeat(<span class=dv>10</span>, <span class=dv>3</span>) <span class=op>--&gt;</span> <span class=dv>10</span> <span class=dv>10</span> <span class=dv>10</span> ...</span></code></pre></div><p>Iterators terminating on the shortest input sequence:</p><div class=sourceCode id=cb4><pre class="sourceCode python"><code class="sourceCode python"><span id=cb4-1><a href=#cb4-1 aria-hidden=true></a>accumulate([<span class=dv>1</span>,<span class=dv>2</span>,<span class=dv>3</span>,<span class=dv>4</span>,<span class=dv>5</span>], initial<span class=op>=</span><span class=dv>10</span>) <span class=op>--&gt;</span> <span class=dv>11</span> <span class=dv>13</span> <span class=dv>16</span> <span class=dv>20</span> <span class=dv>25</span></span>
<span id=cb4-2><a href=#cb4-2 aria-hidden=true></a>chain(<span class=st>&#39;ABC&#39;</span>, <span class=st>&#39;DEF&#39;</span>) <span class=op>--&gt;</span> A B C D E F</span>
<span id=cb4-3><a href=#cb4-3 aria-hidden=true></a>chain.from_iterable()</span>
<span id=cb4-4><a href=#cb4-4 aria-hidden=true></a>chain.from_iterable([<span class=st>&#39;ABC&#39;</span>, <span class=st>&#39;DEF&#39;</span>]) <span class=op>--&gt;</span> A B C D E F</span>
<span id=cb4-5><a href=#cb4-5 aria-hidden=true></a>compress(<span class=st>&#39;ABCDEF&#39;</span>, [<span class=dv>1</span>,<span class=dv>0</span>,<span class=dv>1</span>,<span class=dv>0</span>,<span class=dv>1</span>,<span class=dv>1</span>]) <span class=op>--&gt;</span> A C E F</span>
<span id=cb4-6><a href=#cb4-6 aria-hidden=true></a>dropwhile(<span class=kw>lambda</span> x: x<span class=op>&lt;</span><span class=dv>5</span>, [<span class=dv>1</span>,<span class=dv>4</span>,<span class=dv>6</span>,<span class=dv>4</span>,<span class=dv>1</span>]) <span class=op>--&gt;</span> <span class=dv>6</span> <span class=dv>4</span> <span class=dv>1</span></span>
<span id=cb4-7><a href=#cb4-7 aria-hidden=true></a>filterfalse(<span class=kw>lambda</span> x: x<span class=op>%</span><span class=dv>2</span>, <span class=bu>range</span>(<span class=dv>10</span>)) <span class=op>--&gt;</span> <span class=dv>0</span> <span class=dv>2</span> <span class=dv>4</span> <span class=dv>6</span> <span class=dv>8</span></span>
<span id=cb4-8><a href=#cb4-8 aria-hidden=true></a>groupby()</span>
<span id=cb4-9><a href=#cb4-9 aria-hidden=true></a>islice(<span class=st>&#39;ABCDEFG&#39;</span>, <span class=dv>2</span>, <span class=va>None</span>) <span class=op>--&gt;</span> C D E F G</span>
<span id=cb4-10><a href=#cb4-10 aria-hidden=true></a>starmap(<span class=bu>pow</span>, [(<span class=dv>2</span>,<span class=dv>5</span>), (<span class=dv>3</span>,<span class=dv>2</span>), (<span class=dv>10</span>,<span class=dv>3</span>)]) <span class=op>--&gt;</span> <span class=dv>32</span> <span class=dv>9</span> <span class=dv>1000</span></span>
<span id=cb4-11><a href=#cb4-11 aria-hidden=true></a>takewhile(<span class=kw>lambda</span> x: x<span class=op>&lt;</span><span class=dv>5</span>, [<span class=dv>1</span>,<span class=dv>4</span>,<span class=dv>6</span>,<span class=dv>4</span>,<span class=dv>1</span>]) <span class=op>--&gt;</span> <span class=dv>1</span> <span class=dv>4</span></span>
<span id=cb4-12><a href=#cb4-12 aria-hidden=true></a>tee()</span>
<span id=cb4-13><a href=#cb4-13 aria-hidden=true></a>zip_longest(<span class=st>&#39;ABCD&#39;</span>, <span class=st>&#39;xy&#39;</span>, fillvalue<span class=op>=</span><span class=st>&#39;-&#39;</span>) <span class=op>--&gt;</span> Ax By C<span class=op>-</span> D<span class=op>-</span></span></code></pre></div><p>Combinatoric iterators:</p><div class=sourceCode id=cb5><pre class="sourceCode python"><code class="sourceCode python"><span id=cb5-1><a href=#cb5-1 aria-hidden=true></a>product(<span class=st>&#39;ABC&#39;</span>, repeat<span class=op>=</span><span class=dv>2</span>) <span class=op>--&gt;</span> AA AB AC BA BB BC CA CB CC</span>
<span id=cb5-2><a href=#cb5-2 aria-hidden=true></a>permutations(<span class=st>&#39;ABC&#39;</span>, <span class=dv>2</span>) <span class=op>--&gt;</span> AB AC BA BC CA CB</span>
<span id=cb5-3><a href=#cb5-3 aria-hidden=true></a>combinations(<span class=st>&#39;ABC&#39;</span>, <span class=dv>2</span>) <span class=op>--&gt;</span> AB AC BC</span>
<span id=cb5-4><a href=#cb5-4 aria-hidden=true></a>combinations_with_replacement(<span class=st>&#39;ABC&#39;</span>,<span class=dv>2</span>) <span class=op>--&gt;</span> AA AB AC BB BC CC</span></code></pre></div><h1 id=text-processing>Text Processing</h1><h2 id=regex>Regex</h2><div class=sourceCode id=cb6><pre class="sourceCode py"><code class="sourceCode python"><span id=cb6-1><a href=#cb6-1 aria-hidden=true></a><span class=im>import</span> re</span>
<span id=cb6-2><a href=#cb6-2 aria-hidden=true></a></span>
<span id=cb6-3><a href=#cb6-3 aria-hidden=true></a>regex <span class=op>=</span> re.<span class=bu>compile</span>(pattern, re.IGNORECASE)</span>
<span id=cb6-4><a href=#cb6-4 aria-hidden=true></a>match <span class=op>=</span> regex.match(text) <span class=co># scans only the beginning of the string</span></span>
<span id=cb6-5><a href=#cb6-5 aria-hidden=true></a>search <span class=op>=</span> regex.search(text) <span class=co># scans through the whole string</span></span>
<span id=cb6-6><a href=#cb6-6 aria-hidden=true></a></span>
<span id=cb6-7><a href=#cb6-7 aria-hidden=true></a>a <span class=op>=</span> <span class=st>&quot;123abc&quot;</span></span>
<span id=cb6-8><a href=#cb6-8 aria-hidden=true></a><span class=op>&gt;&gt;&gt;</span> re.match(<span class=st>&quot;[a-z]+&quot;</span>, a)</span>
<span id=cb6-9><a href=#cb6-9 aria-hidden=true></a><span class=va>None</span></span>
<span id=cb6-10><a href=#cb6-10 aria-hidden=true></a><span class=op>&gt;&gt;&gt;</span> re.search(<span class=st>&quot;[a-z]+&quot;</span>, a)</span>
<span id=cb6-11><a href=#cb6-11 aria-hidden=true></a>abc</span></code></pre></div><h1 id=data>Data</h1><h2 id=csv><code>csv</code></h2><div class=sourceCode id=cb7><pre class="sourceCode python"><code class="sourceCode python"><span id=cb7-1><a href=#cb7-1 aria-hidden=true></a><span class=im>import</span> csv</span>
<span id=cb7-2><a href=#cb7-2 aria-hidden=true></a></span>
<span id=cb7-3><a href=#cb7-3 aria-hidden=true></a><span class=co># need to specify newline=&#39;&#39;, else</span></span>
<span id=cb7-4><a href=#cb7-4 aria-hidden=true></a><span class=co># - newlines embedded inside quoted fields will not be interpreted correctly</span></span>
<span id=cb7-5><a href=#cb7-5 aria-hidden=true></a><span class=co># - for &quot;\r\n&quot; line-endings, on write, an extra \r will be added</span></span>
<span id=cb7-6><a href=#cb7-6 aria-hidden=true></a><span class=cf>with</span> <span class=bu>open</span>(<span class=st>&#39;f.csv&#39;</span>, newline<span class=op>=</span><span class=st>&#39;&#39;</span>) <span class=im>as</span> f:</span>
<span id=cb7-7><a href=#cb7-7 aria-hidden=true></a>    reader <span class=op>=</span> csv.reader(f, delimiter<span class=op>=</span><span class=st>&#39;,&#39;</span>, quotechar<span class=op>=</span><span class=st>&#39;&quot;&#39;</span>)</span>
<span id=cb7-8><a href=#cb7-8 aria-hidden=true></a>    <span class=cf>for</span> row <span class=kw>in</span> reader:</span>
<span id=cb7-9><a href=#cb7-9 aria-hidden=true></a>        <span class=bu>print</span>(<span class=st>&#39;, &#39;</span>.join(row))</span>
<span id=cb7-10><a href=#cb7-10 aria-hidden=true></a></span>
<span id=cb7-11><a href=#cb7-11 aria-hidden=true></a><span class=cf>with</span> <span class=bu>open</span>(<span class=st>&#39;f.csv&#39;</span>, <span class=st>&#39;w&#39;</span>, newline<span class=op>=</span><span class=st>&#39;&#39;</span>) <span class=im>as</span> f:</span>
<span id=cb7-12><a href=#cb7-12 aria-hidden=true></a>    writer <span class=op>=</span> csv.writer(f, delimiter<span class=op>=</span><span class=st>&#39;,&#39;</span>, quotechar<span class=op>=</span><span class=st>&#39;&quot;&#39;</span>, quoting<span class=op>=</span>csv.QUOTE_MINIMAL)</span>
<span id=cb7-13><a href=#cb7-13 aria-hidden=true></a>    writer.writerow(some)</span>
<span id=cb7-14><a href=#cb7-14 aria-hidden=true></a>    writer.writerows(someiterable)</span>
<span id=cb7-15><a href=#cb7-15 aria-hidden=true></a></span>
<span id=cb7-16><a href=#cb7-16 aria-hidden=true></a><span class=cf>with</span> <span class=bu>open</span>(<span class=st>&#39;f.csv&#39;</span>, <span class=st>&#39;w&#39;</span>, newline<span class=op>=</span><span class=st>&#39;&#39;</span>) <span class=im>as</span> csvfile:</span>
<span id=cb7-17><a href=#cb7-17 aria-hidden=true></a>    fieldnames <span class=op>=</span> [<span class=st>&#39;a&#39;</span>, <span class=st>&#39;b&#39;</span>]</span>
<span id=cb7-18><a href=#cb7-18 aria-hidden=true></a>    writer <span class=op>=</span> csv.DictWriter(csvfile, fieldnames<span class=op>=</span>fieldnames)</span>
<span id=cb7-19><a href=#cb7-19 aria-hidden=true></a></span>
<span id=cb7-20><a href=#cb7-20 aria-hidden=true></a>    writer.writeheader()</span>
<span id=cb7-21><a href=#cb7-21 aria-hidden=true></a>    writer.writerow({<span class=st>&#39;a&#39;</span>: <span class=dv>1</span>, <span class=st>&#39;b&#39;</span>: <span class=dv>2</span>})</span>
<span id=cb7-22><a href=#cb7-22 aria-hidden=true></a></span>
<span id=cb7-23><a href=#cb7-23 aria-hidden=true></a><span class=co># csv.DictReader(f, fieldnames=None, restkey=None, restval=None, dialect=&#39;excel&#39;, *args, **kwds)</span></span></code></pre></div><h2 id=json><code>json</code></h2><div class=sourceCode id=cb8><pre class="sourceCode python"><code class="sourceCode python"><span id=cb8-1><a href=#cb8-1 aria-hidden=true></a>string <span class=op>=</span>  <span class=st>&#39;{ &quot;name&quot;:&quot;JK&quot;, &quot;age&quot;:30}&#39;</span></span>
<span id=cb8-2><a href=#cb8-2 aria-hidden=true></a>dictionary <span class=op>=</span> json.loads(string)</span>
<span id=cb8-3><a href=#cb8-3 aria-hidden=true></a>string <span class=op>=</span> json.dumps(obj, indent<span class=op>=</span><span class=dv>4</span>, sort_keys<span class=op>=</span><span class=va>True</span>)</span>
<span id=cb8-4><a href=#cb8-4 aria-hidden=true></a></span>
<span id=cb8-5><a href=#cb8-5 aria-hidden=true></a>contents <span class=op>=</span> json.load(file_obj)</span>
<span id=cb8-6><a href=#cb8-6 aria-hidden=true></a>json.dump(obj, file_obj)</span></code></pre></div><h1 id=file-and-directory-access>File and Directory Access</h1><h2 id=os.path><code>os.path</code></h2><div class=sourceCode id=cb9><pre class="sourceCode python"><code class="sourceCode python"><span id=cb9-1><a href=#cb9-1 aria-hidden=true></a>os.getcwd()</span>
<span id=cb9-2><a href=#cb9-2 aria-hidden=true></a>os.listdir(path) <span class=op>--&gt;</span> files, directories</span>
<span id=cb9-3><a href=#cb9-3 aria-hidden=true></a>    <span class=co># path = &quot;..&quot; or &quot;/&quot; to go up a directory</span></span>
<span id=cb9-4><a href=#cb9-4 aria-hidden=true></a>    <span class=co># path = &quot;.&quot;, for current directory</span></span>
<span id=cb9-5><a href=#cb9-5 aria-hidden=true></a>os.walk(path) <span class=op>--&gt;</span> dirpath, dirnames, filenames<span class=op>;</span> recursive</span>
<span id=cb9-6><a href=#cb9-6 aria-hidden=true></a>os.path.isfile(path)</span>
<span id=cb9-7><a href=#cb9-7 aria-hidden=true></a>os.path.join(path1, path2, ...)</span>
<span id=cb9-8><a href=#cb9-8 aria-hidden=true></a>os.path.split(path)</span>
<span id=cb9-9><a href=#cb9-9 aria-hidden=true></a>os.path.absname(relpath)</span></code></pre></div><h2 id=pathlib><code>pathlib</code></h2><div class=sourceCode id=cb10><pre class="sourceCode python"><code class="sourceCode python"><span id=cb10-1><a href=#cb10-1 aria-hidden=true></a><span class=im>import</span> pathlib</span>
<span id=cb10-2><a href=#cb10-2 aria-hidden=true></a>path <span class=op>=</span> Path(<span class=bu>str</span><span class=op>=</span><span class=va>None</span>) <span class=co># None defaults to cwd</span></span>
<span id=cb10-3><a href=#cb10-3 aria-hidden=true></a>path.iterdir() <span class=co># if path is dir, yields path objects of contents</span></span>
<span id=cb10-4><a href=#cb10-4 aria-hidden=true></a>path.glob(pattern)</span>
<span id=cb10-5><a href=#cb10-5 aria-hidden=true></a>path.rglob(pattern) <span class=co># recursive glob, like path.glob(f&quot;**/{pattern}&quot;)</span></span>
<span id=cb10-6><a href=#cb10-6 aria-hidden=true></a>path.joinpath(<span class=op>*</span>path_fragments)</span>
<span id=cb10-7><a href=#cb10-7 aria-hidden=true></a>path.is_dir()</span>
<span id=cb10-8><a href=#cb10-8 aria-hidden=true></a>path.is_file()</span>
<span id=cb10-9><a href=#cb10-9 aria-hidden=true></a>path.exists()</span>
<span id=cb10-10><a href=#cb10-10 aria-hidden=true></a></span>
<span id=cb10-11><a href=#cb10-11 aria-hidden=true></a><span class=co># Path(&quot;dir/hi.py&quot;)</span></span>
<span id=cb10-12><a href=#cb10-12 aria-hidden=true></a>path.name <span class=co># &quot;hi.py&quot;</span></span>
<span id=cb10-13><a href=#cb10-13 aria-hidden=true></a>path.suffix <span class=co># &quot;.py&quot;</span></span>
<span id=cb10-14><a href=#cb10-14 aria-hidden=true></a>path.stem <span class=co># &quot;hi&quot;</span></span></code></pre></div></article></div></main><footer class="site-footer h-card"><data href=/ class=u-url></data><div class=wrapper><h2 class=footer-heading>Notes in Progress</h2><div class=footer-col-wrapper><div class="footer-col footer-col-1"><ul class=contact-list><li class=p-name>febkor</li></ul></div></div></div></div></footer></body></html>