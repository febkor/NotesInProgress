<!DOCTYPE html><html lang=en><head><meta http-equiv=content-type content="text/html; charset=UTF-8"><meta name=viewport content="width=device-width, initial-scale=1"><title>Python NumPy | Notes in Progress</title><meta name=robots content=noindex><meta property=og:title content=Python numpy><meta property=og:site_name content=Notes in progress><meta property=og:type content=article><script type=application/ld+json>
  {"@type":"BlogPosting","headline":"Notes in Progress","dateModified":"2019-02-09T00:00:00+00:00","datePublished":"2019-02-09T00:00:00+00:00","url":https://febkor.github.io/NotesInProgress,"mainEntityOfPage":{"@type":"WebPage","@id":https://febkor.github.io/NotesInProgress},"description":"Notes","@context":"http://schema.org"}</script><link rel=stylesheet href=https://febkor.github.io/NotesInProgress/static/main.css><link rel="shortcut icon" type=image/x-icon href=https://febkor.github.io/NotesInProgress/static/favicon.ico><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded", function () {
    var mathElements = document.getElementsByClassName("math");
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") { katex.render(texText.data, mathElements[i], { displayMode: mathElements[i].classList.contains("display"), throwOnError: false } );
    }}});</script></head><body><header class=site-header role=banner><div class=wrapper><a class=site-title rel=author href=https://febkor.github.io/NotesInProgress>Notes in Progress</a><nav class=site-nav><input type=checkbox id=nav-trigger class=nav-trigger><label for=nav-trigger></label></nav></div></header><main class=page-content aria-label=Content><div class=wrapper><article class="post h-entry" itemscope itemtype=http://schema.org/BlogPosting><header class=post-header><h1 class="post-title p-name" itemprop="name headline">Python NumPy</h1></header><div class="post-content e-content" itemprop=articleBody><p>Important types</p><ul><li><code>ndarray</code></li><li><code>float64</code></li><li><code>int32</code></li></ul><h1 id=arrays>Arrays</h1><p>Important <code>ndarray</code> attributes:</p><ul><li><code>ndim</code></li><li><code>shape</code></li><li><code>size</code>: total number of elements</li><li><code>dtype</code></li></ul><h2 id=creation>Creation</h2><pre><code>array = np.array(Iterable, [dtype=...])</code></pre><p>The type of the array&#x2019;s elements is optional and will usually be deduced as one of <code>int64</code>, <code>float64</code>.</p><p>Sequences of sequences will get transformed to 2D arrays. Can keep nesting sequences to increase the number of dimensions.</p><p>If <code>shape = (dim0,dim1,...)</code> is a tuple:</p><ul><li><code>np.zeros(shape)</code></li><li><code>np.ones(shape)</code></li><li><code>np.full(shape, constant)</code></li><li><code>np.empty(shape)</code>: initial content is random (based on memory state)</li><li><code>np.arange(start_incl, stop_excl, step)</code></li><li><code>np.linspace(start_incl, stop_incl, n_elements)</code></li><li><code>np.eye(constant)</code></li><li><code>np.diag(array)</code></li><li><code>np.fromfunction(lambda indices: ..., shape)</code></li><li><code>np.full_like(a, fill_value)</code>: same shape, dtype as <code>a</code></li></ul><p>Useful methods</p><ul><li><code>a.transpose()</code>, <code>a.T</code></li><li><code>a.reshape(shape)</code></li><li><code>a.flip()</code></li></ul><h2 id=indexing>Indexing</h2><div class=sourceCode id=cb2><pre class="sourceCode python"><code class="sourceCode python"><span id=cb2-1><a href=#cb2-1 aria-hidden=true tabindex=-1></a><span class=co># [[ 1  2  3  4]</span></span>
<span id=cb2-2><a href=#cb2-2 aria-hidden=true tabindex=-1></a><span class=co>#  [ 5  6  7  8]</span></span>
<span id=cb2-3><a href=#cb2-3 aria-hidden=true tabindex=-1></a><span class=co>#  [ 9 10 11 12]]</span></span>
<span id=cb2-4><a href=#cb2-4 aria-hidden=true tabindex=-1></a>a <span class=op>=</span> np.array([[<span class=dv>1</span>,<span class=dv>2</span>,<span class=dv>3</span>,<span class=dv>4</span>], [<span class=dv>5</span>,<span class=dv>6</span>,<span class=dv>7</span>,<span class=dv>8</span>], [<span class=dv>9</span>,<span class=dv>10</span>,<span class=dv>11</span>,<span class=dv>12</span>]])</span></code></pre></div><p>Slicing, and integer array indexing. Returns a view.</p><div class=sourceCode id=cb3><pre class="sourceCode python"><code class="sourceCode python"><span id=cb3-1><a href=#cb3-1 aria-hidden=true tabindex=-1></a>a[<span class=dv>1</span>, :]  <span class=co># [5 6 7 8] of shape (4,)</span></span>
<span id=cb3-2><a href=#cb3-2 aria-hidden=true tabindex=-1></a>a[<span class=dv>1</span>:<span class=dv>2</span>, :] <span class=co># [[5 6 7 8]] of shape (1, 4)</span></span>
<span id=cb3-3><a href=#cb3-3 aria-hidden=true tabindex=-1></a>a[[<span class=dv>1</span>,<span class=dv>2</span>], [<span class=dv>0</span>,<span class=dv>1</span>]] <span class=co># [[5 6], [9 10]]</span></span></code></pre></div><p>Can also use ndarrays to index.</p><p>Boolean array indexing</p><div class=sourceCode id=cb4><pre class="sourceCode python"><code class="sourceCode python"><span id=cb4-1><a href=#cb4-1 aria-hidden=true tabindex=-1></a>a[a <span class=op>&lt;</span> <span class=dv>3</span>] <span class=co># [1 2]</span></span>
<span id=cb4-2><a href=#cb4-2 aria-hidden=true tabindex=-1></a>a[(a <span class=op>&gt;</span> <span class=dv>2</span>) <span class=op>&amp;</span> (a <span class=op>&lt;</span> <span class=dv>5</span>)]</span>
<span id=cb4-3><a href=#cb4-3 aria-hidden=true tabindex=-1></a><span class=co># &amp; (and), | (or), ^ (xor), ~ (not)</span></span></code></pre></div><h2 id=conversions>Conversions</h2><p>By default, 1D arrays are treated as row vectors (<code>(n,), (1,n)</code>) in 2D operations. To convert a 1D array to a column vector, use e.g.</p><ul><li><code>a.reshape(-1,1)</code>: <code>-1</code> calculates the dim size automatically, or</li><li><code>a[:, None] == a[:, np.newaxis]</code>.</li></ul><p>Transpose (<code>.T</code>) can be used to switch between row and column 2D vectors.</p><h2 id=operations>Operations</h2><ul><li><code>+-*/&lt;&gt;</code>, <code>**</code>: all work elementwise, create a new array</li><li><code>A @ B</code>, <code>A.dot(B</code>): matrix product, creates a new array</li><li><code>+=</code>, <code>-=</code>, <code>*=</code>: in-place modification</li></ul><p>When operating with arrays of different types, the type of the resulting array corresponds to the more general or precise one (upcasting).</p><h2 id=universal-functions>Universal Functions</h2><p>Operates on ndarrays element-wise (ufunc). Supports broadcasting.</p><p>Examples</p><ul><li><code>sqrt() exp() log()</code></li><li>arithmetic: <code>add()</code></li><li>trig: <code>sin() sinh() arcsin() arcsinh()</code></li><li>bit-twiddling: <code>bitwise_or()</code></li><li>comparison: <code>greater_equal()</code>, <code>maximum()</code></li><li>floating: <code>isnan()</code></li></ul><p>Some functions are available as methods on the array.</p><p>https://numpy.org/devdocs/reference/ufuncs.html</p><h2 id=routines>Routines</h2><p>Prefer the methods where possible. Less Python overhead, though might work in-place.</p><h3 id=methods>Methods</h3><ul><li><code>sum([axis=...])</code></li><li><code>min([axis=...]), max()</code></li><li><code>argmin([axis=...]), argmax()</code>: returns index</li><li><code>cumsum([axis=...])</code></li><li><code>a.dot(b), a.cross(b)</code></li></ul><p>By default <code>axis=None</code>. For <code>a_ij</code>: <code>i</code> is axis=0, and <code>j</code> is axis=1. So axis 0 refers to the rows e.g.&#xA0;<code>array.sum(axis=0)</code> gives the row-wise sum of <code>array</code>.</p><ul><li><code>mean(), std(), var()</code></li><li><code>sort()</code>: in-place</li><li><code>searchsorted(v, side='left'|'right')</code>: index where <code>v</code> should be inserted to maintain order, else returns <code>0</code> or <code>a.len</code></li><li><code>flatten()</code>: returns a copy</li><li><code>ravel(a, order="C")</code>: like flatten, but returns a view</li><li><code>clip(a, a_min, a_max)</code>: values outside the interval are clipped to the edges</li></ul><h3 id=functions>Functions</h3><p>Suppose <code>a = [1, 2, 3, 4]</code></p><ul><li><code>np.einsum(subscripts, operands)</code><ul><li><code>np.einsum('ij,ij', a, b)</code>: <span class="math inline">c=\sum_{i,j} a_{ij}b_{ij}</span></li><li><code>np.einsum('ik,jk -&gt; ij', a, b)</code>: <span class="math inline">c_{ij}=\sum_k a_{ik}b_{jk}</span></li></ul></li><li><code>np.hypot(a, b)</code></li><li><code>np.where(a &gt; 2) == np.nonzero(a &gt; 2) == [3, 4]</code></li><li><code>np.where(a &gt; 2, 1, 0) == [0, 0, 1, 1]</code></li><li><code>np.floor(), np.ceil(), np.round()</code></li><li><code>np.sort()</code>: returns a copy</li><li><code>np.allclose(a, b, rtol=1e-05, atol=1e-08)</code></li></ul><h3 id=linear-algebra>Linear Algebra</h3><ul><li><code>linalg.eig()</code></li><li><code>linalg.qr()</code></li><li><code>linalg.cholesky()</code></li><li><code>u, s, vh = linalg.svd(a)</code></li></ul><h3 id=random>Random</h3><div class=sourceCode id=cb5><pre class="sourceCode python"><code class="sourceCode python"><span id=cb5-1><a href=#cb5-1 aria-hidden=true tabindex=-1></a><span class=im>from</span> numpy.random <span class=im>import</span> default_rng</span>
<span id=cb5-2><a href=#cb5-2 aria-hidden=true tabindex=-1></a>rng <span class=op>=</span> default_rng(seed)</span>
<span id=cb5-3><a href=#cb5-3 aria-hidden=true tabindex=-1></a>vals <span class=op>=</span> rng.standard_normal(<span class=dv>10</span>)</span>
<span id=cb5-4><a href=#cb5-4 aria-hidden=true tabindex=-1></a>more_vals <span class=op>=</span> rng.standard_normal(<span class=dv>10</span>)</span>
<span id=cb5-5><a href=#cb5-5 aria-hidden=true tabindex=-1></a></span>
<span id=cb5-6><a href=#cb5-6 aria-hidden=true tabindex=-1></a>rng.binomial(n, p[, size])</span>
<span id=cb5-7><a href=#cb5-7 aria-hidden=true tabindex=-1></a>rng.exponential([scale, size])</span>
<span id=cb5-8><a href=#cb5-8 aria-hidden=true tabindex=-1></a>rng.normal([loc, scale, size])</span>
<span id=cb5-9><a href=#cb5-9 aria-hidden=true tabindex=-1></a>rng.uniform([low, high, size])</span>
<span id=cb5-10><a href=#cb5-10 aria-hidden=true tabindex=-1></a></span>
<span id=cb5-11><a href=#cb5-11 aria-hidden=true tabindex=-1></a>rng.shuffle(arr)</span>
<span id=cb5-12><a href=#cb5-12 aria-hidden=true tabindex=-1></a>rng.integers(low_incl, high_excl, size<span class=op>=</span><span class=va>None</span><span class=op>|</span>shape)</span></code></pre></div><p><a href=https://numpy.org/devdocs/reference/random/generator.html class=uri>https://numpy.org/devdocs/reference/random/generator.html</a></p><h3 id=save-and-loading-numpy-objects>Save and Loading Numpy Objects</h3><div class=sourceCode id=cb6><pre class="sourceCode python"><code class="sourceCode python"><span id=cb6-1><a href=#cb6-1 aria-hidden=true tabindex=-1></a>np.save(<span class=st>&#39;filename&#39;</span>, a)</span>
<span id=cb6-2><a href=#cb6-2 aria-hidden=true tabindex=-1></a>b <span class=op>=</span> np.load(<span class=st>&#39;filename.npy&#39;</span>)</span>
<span id=cb6-3><a href=#cb6-3 aria-hidden=true tabindex=-1></a>np.savetxt(<span class=st>&#39;filename.csv&#39;</span>, a)</span>
<span id=cb6-4><a href=#cb6-4 aria-hidden=true tabindex=-1></a>np.loadtxt(<span class=st>&#39;filename.csv&#39;</span>)</span>
<span id=cb6-5><a href=#cb6-5 aria-hidden=true tabindex=-1></a>np.savez_compressed(<span class=st>&#39;filename&#39;</span>, a)</span></code></pre></div><p><code>.npy</code> and <code>.npz</code> files are smaller and faster to read.</p><h1 id=help-functions>Help Functions</h1><p><a href=https://numpy.org/doc/stable/reference/routines.html#routines>All Numpy Routines</a></p><ul><li><code>help(function)</code></li><li><code>function?</code>, <code>object?</code> in IPython</li><li><code>lookfor(keyword)</code></li><li><code>info(func/class/module)</code></li><li><code>source(npy_obj)</code></li><li><code>obj??</code> gives the source code in IPython</li></ul></article></div></main><footer class="site-footer h-card"><data href=/ class=u-url></data><div class=wrapper><h2 class=footer-heading>Notes in Progress</h2><div class=footer-col-wrapper><div class="footer-col footer-col-1"><ul class=contact-list><li class=p-name>febkor</li></ul></div></div></div></div></footer></body></html>